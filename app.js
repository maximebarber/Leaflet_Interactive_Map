// * Set initial map view
var mymap = 
L.map
(
    'mapid'
)
.setView
(
    [48.5574791, 7.7475236999999995], 
    10
);

// * Add a tile to variable mymap (mapbox)
L.tileLayer
(
    'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', 
    {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1IjoibWRiYXJiZXIiLCJhIjoiY2psMnBxZmk3MXQ4czNxcDR0Z2V4YzJxeiJ9.KH2_16TV4w9prYDWZUstbg'
    }
)
.addTo(mymap);

// * Initialize Zones and convert them to LAT/LNG
var latlngs = invert_lat_lng
(
    [
        // * Obernai
        [
            [
                7.46315,
                48.4729213
            ],
            [
                7.4404907,
                48.4556197
            ],
            [
                7.4521637,
                48.4405898
            ],
            [
                7.4933624,
                48.4351233
            ],
            [
                7.5180817,
                48.4533427
            ],
            [
                7.517395,
                48.4720108
            ],
            [
                7.4830627,
                48.4792941
            ],
            [
                7.4638367,
                48.472466
            ]
        ],
        // * Strasbourg
        [
            [
                7.7748870849609375,
                48.62746280105111
            ],
            [
                7.719268798828125,
                48.63063958030254
            ],
            [
                7.7048492431640625,
                48.61929302177067
            ],
            [
                7.6966094970703125,
                48.60158729649512
            ],
            [
                7.6815032958984375,
                48.59931688270807
            ],
            [
                7.679443359375,
                48.59568400838304
            ],
            [
                7.680816650390624,
                48.587963282992845
            ],
            [
                7.6746368408203125,
                48.57342695234659
            ],
            [
                7.6636505126953125,
                48.55797752047523
            ],
            [
                7.658843994140625,
                48.5534326717307
            ],
            [
                7.6663970947265625,
                48.537977131982025
            ],
            [
                7.6773834228515625,
                48.532975799741635
            ],
            [
                7.682876586914063,
                48.518878477951446
            ],
            [
                7.68218994140625,
                48.50068258677571
            ],
            [
                7.680816650390624,
                48.48156986876895
            ],
            [
                7.7048492431640625,
                48.47610776896956
            ],
            [
                7.7405548095703125,
                48.471555569874745
            ],
            [
                7.7542877197265625,
                48.48202501720533
            ],
            [
                7.779006958007812,
                48.500227605781035
            ],
            [
                7.790679931640624,
                48.5216072980982
            ],
            [
                7.7954864501953125,
                48.545705491847464
            ],
            [
                7.796173095703125,
                48.55388717497782
            ],
            [
                7.769393920898437,
                48.60113322190171
            ],
            [
                7.7803802490234375,
                48.61202988553221
            ],
            [
                7.793426513671875,
                48.62519355056901
            ],
            [
                7.798919677734375,
                48.63563125791996
            ],
            [
                7.7748870849609375,
                48.62746280105111
            ]  
        ],
        // * Molsheim 
        [
            [
                7.476882934570312,
                48.552750909204676
            ],
            [
                7.47344970703125,
                48.54252336892718
            ],
            [
                7.467269897460937,
                48.53888641203577
            ],
            [
                7.459716796875001,
                48.5370678355958
            ],
            [
                7.465553283691407,
                48.53183906441962
            ],
            [
                7.4686431884765625,
                48.529792876529015
            ],
            [
                7.479972839355468,
                48.52638237963075
            ],
            [
                7.4871826171875,
                48.525700252688765
            ],
            [
                7.499542236328124,
                48.52797397343302
            ],
            [
                7.504348754882812,
                48.53252110867523
            ],
            [
                7.507781982421875,
                48.53547652761968
            ],
            [
                7.50812530517578,
                48.5402503014931
            ],
            [
                7.506752014160156,
                48.546841915833404
            ],
            [
                7.497138977050781,
                48.55116009425219
            ],
            [
                7.487869262695312,
                48.5493419587775
            ],
            [
                7.476882934570312,
                48.552750909204676
            ]
        ]
    ]
);

// * Definie zone and add to map
var polygon = L.polygon
(
    latlngs, 
    { color:'#1A237E'}
)
.addTo(mymap);

// zoom the map to the polygon
// map.fitBounds
// (
//     polygon.getBounds()
// );

// * Convert from LNG/LAT to LAT/LNG

function invert_lat_lng(coordinates)
{
    for (j = 0; j < coordinates.length; j++)
    {
        for (i = 0; i < coordinates[j].length; i++)
        {
            let tmp = coordinates[j][i][0];
    
            coordinates[j][i][0] = coordinates[j][i][1];
            coordinates[j][i][1] = tmp;
        }
    }
    return coordinates;
}